<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink"
     version="1.1"
     width="701px"
     height="531px"
     viewBox="0 0 701 531"
     style="background: transparent; background-color: transparent;">

    <defs>
        <style type="text/css"><![CDATA[
      /* Keep original visual intent but arrows will have a small arrowhead */
      path[style*="stroke:"],
      path[stroke],
      line,
      polyline {
        stroke: #ffffff !important;
        stroke-width: 1.5 !important;
        stroke-linecap: round !important;
        stroke-linejoin: round !important;
        fill: none !important;
      }

      /* Rectangles / boxes: transparent fill, white stroke, rounded corners */
      rect {
        fill: none !important;
        stroke: #ffffff !important;
        stroke-width: 3 !important;
        rx: 12;
        ry: 12;
        shape-rendering: geometricPrecision;
      }

      .box {
        fill: none !important;
        stroke: #ffffff !important;
        stroke-width: 3 !important;
        rx: 12;
        ry: 12;
      }

      /* Text: force white where appropriate */
      text, .title, .subtitle, .optional {
        fill: #ffffff !important;
      }
    ]]></style>

        <!-- subtle drop shadow for boxes -->
        <filter id="box-shadow" x="-30%" y="-30%" width="160%" height="160%">
            <feDropShadow dx="0" dy="6" stdDeviation="10" flood-color="#000000" flood-opacity="0.35"/>
        </filter>

        <!-- small arrowhead marker -->
        <marker id="small-arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
            <polygon points="0 0, 8 3, 0 6" fill="#ffffff" />
        </marker>
    </defs>

    <g>
        <g data-cell-id="0">
            <g data-cell-id="1">

                <g data-cell-id="bRcz245sA1s3oTQF16aW-34">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 97.5 80 L 97.5 143.63" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-1">
                    <g transform="translate(0.5,0.5)">
                        <rect x="0" y="0" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 40px; margin-left: 1px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">socket()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" data-font-src="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>Create an endpoint</b></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="98" y="44" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">socket()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-35">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 97.5 230 L 97.5 293.63" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-3">
                    <g transform="translate(0.5,0.5)">
                        <rect x="0" y="150" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 190px; margin-left: 1px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">setsockopt()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>configuring behavior</b></font>
                                                </div>
                                                <div>
                                                    <font style="font-size: 10px; color: rgb(255, 255, 255);">(optional)</font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="98" y="194" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">setsockopt()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-36">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 97.5 380 L 97.5 443.63" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-22">
                    <g transform="translate(0.5,0.5)">
                        <rect x="0" y="300" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 340px; margin-left: 1px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">bind()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" data-font-src="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>Assign IP + port</b></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="98" y="344" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">bind()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-37">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 195 490 L 230 490 Q 240 490 240 480 L 240 50 Q 240 40 250 40 L 298.63 40" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-26">
                    <g transform="translate(0.5,0.5)">
                        <rect x="0" y="450" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 490px; margin-left: 1px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">listen()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" data-font-src="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>Make it accept connections</b></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="98" y="494" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">listen()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-38">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 402.5 80 L 402.5 143.63" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-31">
                    <g transform="translate(0.5,0.5)">
                        <rect x="305" y="0" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 40px; margin-left: 306px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">accept()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" data-font-src="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>Perform TCP handshake and create client socket</b></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="403" y="44" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">accept()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-39">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 402.5 230 L 402.5 260 Q 402.5 270 402.5 280 L 402.5 293.63" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-32">
                    <g transform="translate(0.5,0.5)">
                        <rect x="305" y="150" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 190px; margin-left: 306px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">recv()/send()</font>
                                                </div>
                                                <div>
                                                    <b><font face="Quicksand" data-font-src="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&amp;display=swap" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));">Exchange data</font></b>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="403" y="194" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">recv()/send()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-53">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 500 340 L 593.63 340" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-33">
                    <g transform="translate(0.5,0.5)">
                        <rect x="305" y="300" width="195" height="80" rx="12" ry="12"
                              fill="#000000"
                              style="fill: light-dark(rgb(0, 0, 0), rgb(237, 237, 237)); stroke: light-dark(rgb(0, 0, 0), rgb(237, 237, 237));"
                              stroke="#000000"
                              pointer-events="all"
                              filter="url(#box-shadow)"/>
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 193px; height: 1px; padding-top: 340px; margin-left: 306px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Source Code Pro" style="color: light-dark(rgb(255, 255, 255), rgb(18, 18, 18));">close()</font>
                                                </div>
                                                <div>
                                                    <font face="Quicksand" style="color: light-dark(rgb(0, 204, 0), rgb(0, 162, 0));"><b>End connection</b></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                                <text x="403" y="344" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">close()...</text>
                            </switch>
                        </g>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-67">
                    <g transform="translate(0.5,0.5)">
                        <path d="M 650 325 L 650 50 Q 650 40 640 40 L 506.37 40" fill="none"
                              stroke="#000000"
                              style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"
                              stroke-miterlimit="10"
                              pointer-events="stroke"
                              marker-end="url(#small-arrow)"/>
                    </g>
                </g>

                <g data-cell-id="bRcz245sA1s3oTQF16aW-54">
                    <g transform="translate(0.5,0.5)">
                        <!-- text only, no surrounding box -->
                    </g>
                    <g>
                        <g>
                            <switch>
                                <foreignObject style="overflow: visible; text-align: left;" pointer-events="none"
                                               width="100%" height="100%"
                                               requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                         style="display: flex; align-items: center; justify-content: center; width: 98px; height: 1px; padding-top: 340px; margin-left: 601px;">
                                        <div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000;">
                                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal;">
                                                <div>
                                                    <font face="Times New Roman" style="color: light-dark(rgb(204, 0, 204), rgb(255, 137, 255));"><i>Back to accept()</i></font>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </foreignObject>
                            </switch>
                        </g>
                    </g>
                </g>

            </g>
        </g>
    </g>
</svg>
